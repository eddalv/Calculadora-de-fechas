<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Calculadora de fechas LINGUATEC ®</title>
    <style>
        /* Estilos Generales */
        body {
            /* Imagen de fondo */
            background-image: url('images/fondocc.png');
            background-size: cover; /* Ajusta la imagen para cubrir todo el fondo */
            background-repeat: no-repeat; /* Evita que la imagen se repita */
            background-position: center center; /* Centra la imagen */
            background-attachment: fixed; /* Hace que el fondo permanezca fijo al hacer scroll */
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            color: white; /* Cambia el color del texto para mayor contraste */
        }

        /* Header y Footer */
        header, footer {
            position: fixed;
            left: 0;
            right: 0;
            background-color: rgba(0, 0, 0, 0.7); /* Fondo semi-transparente para legibilidad */
            height: 60px;
            display: flex;
            align-items: center;
            padding: 0 20px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            z-index: 1000;
            justify-content: center; /* Centrar los elementos dentro del header */
        }
        header {
            top: 0;
        }
        footer {
            bottom: 0;
            justify-content: center;
        }
        main {
            margin: 70px auto; /* Espacio para el header fijo */
            padding: 20px;
            max-width: 1000px;
            background-color: rgba(0, 0, 0, 0.5); /* Fondo semi-transparente para el contenido */
            border-radius: 15px;
        }

        /* Botones de Calculadora */
        .calculator-buttons {
            text-align: center;
            margin-bottom: 10px;
        }
        .calculator-buttons button {
            background-color: #E0E0E0;
            color: #0074BC;
            padding: 10px 20px;
            margin: 5px;
            border: none;
            border-radius: 15px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .calculator-buttons button.active {
            background-color: #0074BC;
            color: white;
        }

        /* "Hoy es" */
        .hoy-es-container {
            text-align: center;
            margin-bottom: 20px;
        }
        .hoy-es-container p {
            font-size: 16px;
            color: #FFD700; /* Oro para resaltar */
        }

        /* Contenedor Principal */
        .main-container {
            display: flex;
            justify-content: space-between;
            align-items: stretch;
            flex-wrap: wrap; /* Permite que los elementos se ajusten en pantallas pequeñas */
        }
        .center-content, .right-side {
            width: 48%;
            display: flex;
            flex-direction: column;
            margin-bottom: 20px;
        }

        /* Logo y Título */
        #logo img {
            height: 40px;
        }
        header h1 {
            flex: 1; /* Ajuste para centrar el título */
            text-align: center;
            font-size: 22px;
            color: #FFD700; /* Oro para destacar */
            margin: 0; /* Eliminar márgenes predeterminados */
            cursor: pointer; /* Indicar que es clicable */
        }
        #aalex-button {
            flex: 0 0 auto; /* Evitar que ocupe espacio adicional */
            text-align: right;
        }
        #aalex-button a {
            background-color: #F6931D;
            color: white;
            padding: 10px 15px;
            text-decoration: none;
            border-radius: 15px;
            font-size: 16px;
        }

        /* Estilos de las Calculadoras */
        #calculadora-dias, #calculadora-fechas, #nueva-fecha-termino, .calendar {
            background-color: rgba(255, 255, 255, 0.1);
            padding: 20px;
            margin-top: 20px;
            border-radius: 25px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        #calculadora-dias h2, #calculadora-fechas h2, #nueva-fecha-termino h2 {
            color: #FFD700; /* Oro para los títulos */
            text-align: center;
        }

        /* Formularios */
        .calculator-inputs {
            text-align: center;
        }
        .calculator-inputs label {
            font-size: 16px;
            color: white;
        }
        .calculator-inputs input[type="date"],
        .calculator-inputs input[type="number"] {
            width: 80%;
            max-width: 200px;
            padding: 10px;
            margin-top: 5px;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 15px;
            font-size: 16px;
            background-color: #f9f9f9;
        }
        input[type="checkbox"] {
            margin-right: 10px;
        }
        button {
            background-color: #FFD700;
            color: #333;
            padding: 12px 20px;
            border: none;
            border-radius: 15px;
            font-size: 16px;
            cursor: pointer;
            align-self: center;
            transition: background-color 0.3s, color 0.3s;
        }
        button:hover {
            background-color: #FFC107;
            color: white;
        }

        /* Resultados */
        .calculadora-resultados {
            text-align: center;
            margin-top: 20px;
            color: #FFD700;
        }
        .calculadora-resultados h3 {
            color: #FFD700;
        }

        /* Calendario */
        .calendar {
            background-color: rgba(255, 255, 255, 0.1);
        }
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .calendar-header button {
            background-color: transparent;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #FFD700;
        }
        .calendar-header h3 {
            margin: 0;
            color: #FFD700;
            font-size: 20px;
        }
        .calendar-legend {
            text-align: center;
            font-size: 14px;
            color: #F6931D; /* Color naranja del botón Aalex */
            font-weight: bold; /* Negritas */
            margin-bottom: 10px;
        }
        .calendar table {
            width: 100%;
            border-collapse: collapse;
        }
        .calendar th, .calendar td {
            text-align: center;
            padding: 10px;
            border-radius: 10px;
            font-size: 16px;
            transition: background-color 0.3s;
            color: white;
        }
        .calendar th {
            color: #FFD700;
            background-color: rgba(0, 0, 0, 0.3);
            border: none;
        }
        .calendar td {
            border: none;
            cursor: pointer;
            background-color: rgba(0, 0, 0, 0.2);
        }
        .calendar td:hover {
            background-color: rgba(255, 215, 0, 0.7); /* Oro al pasar el cursor */
        }
        .calendar .today {
            background-color: #F6931D;
            color: white;
        }

        /* Formulario de Congelamiento */
        #formulario-congelamiento {
            background-color: rgba(255, 255, 255, 0.1);
            padding: 20px;
            margin-top: 20px;
            border-radius: 25px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            display: none;
            flex-direction: column;
            position: relative; /* Para posicionar la flecha de regreso */
        }
        /* Flecha de regreso */
        .back-arrow {
            position: absolute;
            top: 20px;
            left: 20px;
            font-size: 24px;
            color: #FFD700;
            cursor: pointer;
            transition: color 0.3s;
        }
        .back-arrow:hover {
            color: #FFC107;
        }
        /* Leyenda lateral en el formulario */
        .left-legend {
            width: 30%;
            padding-right: 20px;
            box-sizing: border-box;
            font-size: 14px;
            color: white;
        }
        .left-legend b {
            font-weight: bold;
            color: #FFD700; /* Oro */
        }
        .form-container {
            display: flex;
            gap: 20px; /* Espacio entre leyenda y campos */
            flex-wrap: wrap; /* Permite que los elementos se ajusten en pantallas pequeñas */
        }
        .form-fields {
            width: 70%;
            display: flex; /* Para centrar los elementos */
            flex-direction: column;
            align-items: center; /* Centrar los elementos horizontalmente */
        }
        .form-fields label {
            display: block;
            margin-bottom: 5px;
            font-size: 16px;
            text-align: center; /* Centrar las etiquetas */
            color: white;
        }
        .form-fields input, .form-fields textarea {
            width: 100%;
            max-width: 400px;
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 15px;
            font-size: 16px;
            background-color: #f9f9f9;
        }
        .form-fields textarea {
            resize: vertical;
            height: 80px;
        }
        .form-buttons {
            text-align: center;
            margin-top: 10px;
        }
        .form-buttons button {
            background-color: #FFD700;
            color: #333;
            padding: 12px 20px;
            border: none;
            border-radius: 15px;
            font-size: 16px;
            cursor: pointer;
            margin: 10px;
            transition: background-color 0.3s, color 0.3s;
        }
        .form-buttons button:hover {
            background-color: #FFC107;
            color: white;
        }

        /* Modal */
        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 2000; /* Sit on top */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgba(0,0,0,0.5); /* Black w/ opacity */
        }
        .modal-content {
            background-color: #fefefe;
            margin: 15% auto; /* 15% from the top and centered */
            padding: 20px;
            border: 1px solid #888;
            width: 80%; /* Could be more or less, depending on screen size */
            max-width: 500px;
            border-radius: 10px;
            position: relative;
            text-align: center;
            color: #333;
        }
        .close-modal {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            position: absolute;
            top: 10px;
            right: 20px;
            cursor: pointer;
        }
        .close-modal:hover,
        .close-modal:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }

        /* Radio Buttons Personalizados */
        .radio-group {
            display: flex;
            flex-direction: row;
            align-items: center;
            gap: 15px;
            margin-top: 10px;
        }
        .radio-group label {
            margin-left: 5px;
            color: white;
        }
        .radio-group.centered {
            justify-content: center; /* Centrar los radio buttons */
        }
        .custom-radio {
            display: flex;
            align-items: center;
            cursor: pointer;
            font-size: 16px;
            position: relative;
        }
        /* Ocultar el radio button original */
        .custom-radio input[type="radio"] {
            display: none;
        }
        /* Crear el radio button personalizado */
        .custom-radio .radio-btn {
            width: 16px;
            height: 16px;
            border: 2px solid #ccc;
            border-radius: 4px; /* Esquinas redondeadas */
            margin-right: 8px;
            transition: background-color 0.3s, border-color 0.3s;
        }
        /* Cambiar el color cuando está seleccionado */
        /* Gmail: Rojo */
        #gmail:checked + .radio-btn {
            background-color: red;
            border-color: red;
        }
        /* Outlook: Azul */
        #outlook:checked + .radio-btn {
            background-color: blue;
            border-color: blue;
        }
        /* Otro: Gris */
        #otro:checked + .radio-btn {
            background-color: gray;
            border-color: gray;
        }
        /* Efecto hover */
        .custom-radio:hover .radio-btn {
            border-color: #FFD700;
        }
        /* Contenedor para seleccionar cliente de correo */
        .radio-selection {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            max-width: 400px;
            margin: 0 auto;
        }

        /* Texto en Paréntesis */
        .parenthetical {
            font-size: 14px;
            color: #F6931D; /* Naranja */
        }

        /* Responsive */
        @media (max-width: 800px) {
            .main-container {
                flex-direction: column;
                align-items: center;
            }
            .center-content, .right-side {
                width: 100%;
            }
            .right-side {
                margin-top: 20px;
            }
            .form-container {
                flex-direction: column;
                gap: 10px; /* Ajuste para dispositivos móviles */
            }
            .left-legend, .form-fields {
                width: 100%;
            }
            .left-legend {
                margin-bottom: 20px;
            }
            /* Ajustar el tamaño del texto en dispositivos pequeños */
            .parenthetical {
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <!-- Izquierda: Logo -->
        <div id="logo">
            <a href="https://www.linguatec.com.mx/">
                <img src="https://www.linguatec.com.mx/__data/_img/header/logotipo_linguatec.webp" alt="Linguatec Logo">
            </a>
        </div>
        <!-- Centro: Título -->
        <h1 id="header-title">Calculadora de fechas LINGUATEC ®</h1>
        <!-- Derecha: Botón Aalex -->
        <div id="aalex-button">
            <a href="https://linguatec.schoolibox.com/">Aalex</a>
        </div>
    </header>
    
    <!-- Contenido principal -->
    <main>
        <!-- Botones para seleccionar calculadoras -->
        <div class="calculator-buttons">
            <button id="calculadora-dias-btn" class="active">Calculadora de congelamientos</button>
            <button id="calculadora-fechas-btn">Calculadora de días congelados</button>
            <button id="nueva-fecha-termino-btn">Nueva fecha de término</button>
        </div>

        <!-- "Hoy es" -->
        <div class="hoy-es-container">
            <p id="hoy-es"></p>
        </div>

        <div class="main-container" id="main-content">
            <!-- Centro: Calculadoras -->
            <div class="center-content">
                <!-- Calculadora de congelamientos -->
                <div id="calculadora-dias">
                    <h2>Calculadora de congelamientos</h2>
                    <div class="calculator-inputs">
                        <label for="fecha-inicial">Fecha Inicial:</label><br>
                        <input type="date" id="fecha-inicial" min="">
                        <br>
                        <label for="dias-a-sumar">Número de días a congelar (15 a 90):</label><br>
                        <input type="number" id="dias-a-sumar" min="15" max="90"><br>
                    </div>
                    <div style="text-align: center;">
                        <input type="checkbox" id="excluir-dias" checked>
                        <label for="excluir-dias">Excluir domingos y días festivos oficiales en México</label><br><br>
                        <button id="calcular-dias-btn">Calcular</button>
                    </div>
                    <div class="calculadora-resultados">
                        <h3>Fecha de finalización de congelamiento:</h3>
                        <p id="resultado-dias"></p>
                        <button id="solicitar-congelamiento-btn" style="display: none;">Solicitar congelamiento</button>
                    </div>
                </div>
                
                <!-- Calculadora de días congelados -->
                <div id="calculadora-fechas" style="display:none;">
                    <h2>Calculadora de días congelados</h2>
                    <div class="calculator-inputs">
                        <label for="fecha1">Fecha 1:</label><br>
                        <input type="date" id="fecha1"><br>
                        <label for="fecha2">Fecha 2:</label><br>
                        <input type="date" id="fecha2"><br>
                    </div>
                    <div style="text-align: center;">
                        <input type="checkbox" id="excluir-dias-fechas" checked>
                        <label for="excluir-dias-fechas">Excluir domingos y días festivos oficiales en México</label><br><br>
                        <button id="calcular-fechas-btn">Calcular</button>
                    </div>
                    <div class="calculadora-resultados">
                        <h3>Número de días congelados:</h3>
                        <p id="resultado-fechas"></p>
                    </div>
                </div>

                <!-- Nueva fecha de término -->
                <div id="nueva-fecha-termino" style="display:none;">
                    <h2>Nueva fecha de término</h2>
                    <div class="calculator-inputs">
                        <label for="fecha-inicio-termino">Fecha inicial de término de curso:</label><br>
                        <input type="date" id="fecha-inicio-termino"><br>
                        <label for="dias-a-sumar-termino">Número de días congelados (15 a 90):</label><br>
                        <input type="number" id="dias-a-sumar-termino" min="15" max="90"><br>
                    </div>
                    <div style="text-align: center;">
                        <button id="calcular-termino-btn">Calcular</button>
                    </div>
                    <div class="calculadora-resultados">
                        <h3>Nueva fecha de término de curso:</h3>
                        <p id="resultado-termino"></p>
                    </div>
                </div>
            </div>
            <!-- Derecha: Calendario -->
            <div class="right-side" id="calendar-container">
                <div class="calendar">
                    <div class="calendar-header">
                        <button id="prev-month">&lt;</button>
                        <h3 id="calendar-month-year"></h3>
                        <button id="next-month">&gt;</button>
                    </div>
                    <!-- Leyenda agregada -->
                    <p class="calendar-legend">
                        RECUERDA QUE SOLO PUEDES CONGELAR FECHAS A FUTURO Y ÚNICAMENTE ENTRE 15 Y 90 DÍAS SIN CONTAR DOMINGOS NI DÍAS FESTIVOS
                    </p>
                    <table id="calendar-table">
                        <!-- El calendario será generado por JavaScript -->
                    </table>
                </div>
            </div>
        </div>

        <!-- Formulario de congelamiento -->
        <div id="formulario-congelamiento">
            <!-- Flecha de regreso -->
            <div class="back-arrow" id="back-arrow">&#8592;</div>
            <h2>Solicitud de congelamiento</h2>
            <div class="form-container">
                <div class="left-legend">
                    <p>
                        <b>RECUERDA QUE SOLO PUEDES CONGELAR FECHAS POSTERIORES AL DÍA PRESENTE.</b> Copia el texto generado y envíalo al correo <b>atencionacademica.cg@linguatec.com.mx</b>, con copia a <b>alberto.martinez@linguatec.com.mx</b> y <b>recepcion.sjr@linguatec.com.mx</b>, y utiliza el asunto <b>SOLICITUD DE CONGELAMIENTO (TU NOMBRE Y MATRÍCULA)</b>
                    </p>
                </div>
                <div class="form-fields">
                    <label for="nombre">Nombre:</label>
                    <input type="text" id="nombre">

                    <label for="matricula">Matrícula:</label>
                    <input type="text" id="matricula">

                    <label for="filial">Filial:</label>
                    <input type="text" id="filial">

                    <label for="fecha-inicio">Fecha de inicio de congelamiento:</label>
                    <input type="date" id="fecha-inicio" readonly>

                    <label for="fecha-fin">Fecha de término de congelamiento:</label>
                    <input type="date" id="fecha-fin" readonly>

                    <label for="motivo">Motivo de congelamiento:</label>
                    <textarea id="motivo"></textarea>

                    <!-- Leyenda y Radio Buttons Centrados y Personalizados -->
                    <div class="radio-selection">
                        <label for="cliente-correo">
                            Selecciona tu cliente de correo si deseas hacer un borrador automático <span class="parenthetical">(deberás tener tu sesión de correo iniciada en tu navegador)</span>:
                        </label><br>
                        <div class="radio-group centered">
                            <label class="custom-radio" for="gmail">
                                <input type="radio" id="gmail" name="cliente-correo" value="gmail">
                                <span class="radio-btn"></span>
                                Gmail
                            </label>
                            <label class="custom-radio" for="outlook">
                                <input type="radio" id="outlook" name="cliente-correo" value="outlook">
                                <span class="radio-btn"></span>
                                Outlook
                            </label>
                            <label class="custom-radio" for="otro">
                                <input type="radio" id="otro" name="cliente-correo" value="otro">
                                <span class="radio-btn"></span>
                                Otro
                            </label>
                        </div>
                        <div id="otro-correo-container" style="display: none; margin-top: 10px;">
                            <label for="otro-correo">Introduce tu cliente de correo:</label><br>
                            <input type="text" id="otro-correo" placeholder="Ejemplo: Yahoo, ProtonMail, etc.">
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-buttons">
                <button id="generar-texto-btn">Generar</button>
            </div>
            <div>
                <h3>Texto generado:</h3>
                <textarea id="texto-generado" readonly style="width: 100%; height: 200px; border-radius: 10px;"></textarea>
                <div class="form-buttons">
                    <button id="copiar-texto-btn">Copiar texto</button>
                </div>
            </div>
        </div>
    </main>
    
    <!-- Modal para Pop-ups -->
    <div id="custom-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" id="close-modal">&times;</span>
            <p id="modal-message"></p>
        </div>
    </div>
    
    <!-- Footer -->
    <footer>
        Designed by Héctor Eduardo Alvarez Alanis. 2024.
    </footer>
    
    <!-- JavaScript -->
    <script>
        // Mostrar la fecha actual en "Hoy es"
        function formatDate(date) {
            const daysOfWeek = ['domingo', 'lunes', 'martes', 'miércoles', 'jueves', 'viernes', 'sábado'];
            const months = ['enero', 'febrero', 'marzo', 'abril', 'mayo', 'junio',
                            'julio', 'agosto', 'septiembre', 'octubre', 'noviembre', 'diciembre'];
            let dayName = daysOfWeek[date.getDay()];
            let dayNumber = date.getDate();
            let monthName = months[date.getMonth()];
            let year = date.getFullYear();
            return `${dayName} ${dayNumber} de ${monthName} de ${year}`;
        }

        let today = new Date();
        today.setHours(0,0,0,0); // Establecer a medianoche para comparación
        document.getElementById('hoy-es').innerText = 'Hoy es: ' + formatDate(today);

        // Variables para el calendario
        let currentMonth = today.getMonth();
        let currentYear = today.getFullYear();

        // Generar calendario
        function generateCalendar(month, year) {
            const calendarTable = document.getElementById('calendar-table');
            const monthYearHeader = document.getElementById('calendar-month-year');
            calendarTable.innerHTML = '';
            const months = ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio',
                            'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'];
            monthYearHeader.innerText = months[month] + ' ' + year;

            const daysOfWeek = ['Lun', 'Mar', 'Mié', 'Jue', 'Vie', 'Sáb', 'Dom'];
            let headerRow = document.createElement('tr');
            for (let day of daysOfWeek) {
                let th = document.createElement('th');
                th.innerText = day;
                headerRow.appendChild(th);
            }
            calendarTable.appendChild(headerRow);

            let firstDay = new Date(year, month, 1);
            let startingDay = firstDay.getDay() === 0 ? 6 : firstDay.getDay() - 1;
            let totalDays = new Date(year, month + 1, 0).getDate();
            let dateCount = 1;

            for (let i = 0; i < 6; i++) {
                let row = document.createElement('tr');
                for (let j = 0; j < 7; j++) {
                    let cell = document.createElement('td');
                    if (i === 0 && j < startingDay) {
                        cell.innerText = '';
                    } else if (dateCount > totalDays) {
                        cell.innerText = '';
                    } else {
                        cell.innerText = dateCount;
                        // Resaltar el día actual
                        if (dateCount === today.getDate() && month === today.getMonth() && year === today.getFullYear()) {
                            cell.classList.add('today');
                        }
                        dateCount++;
                    }
                    row.appendChild(cell);
                }
                calendarTable.appendChild(row);
            }
        }

        // Inicializar calendario
        generateCalendar(currentMonth, currentYear);

        // Funciones para cambiar de mes
        document.getElementById('prev-month').addEventListener('click', function() {
            currentMonth--;
            if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            }
            generateCalendar(currentMonth, currentYear);
        });

        document.getElementById('next-month').addEventListener('click', function() {
            currentMonth++;
            if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            }
            generateCalendar(currentMonth, currentYear);
        });

        // Mostrar/ocultar calculadoras y resaltar botón activo
        function showCalculator(calculator) {
            // Ocultar todas las calculadoras
            document.getElementById('calculadora-dias').style.display = 'none';
            document.getElementById('calculadora-fechas').style.display = 'none';
            document.getElementById('nueva-fecha-termino').style.display = 'none';
            // Remover clase active de todos los botones
            document.getElementById('calculadora-dias-btn').classList.remove('active');
            document.getElementById('calculadora-fechas-btn').classList.remove('active');
            document.getElementById('nueva-fecha-termino-btn').classList.remove('active');
            // Mostrar la calculadora seleccionada y activar el botón
            if (calculator === 'dias') {
                document.getElementById('calculadora-dias').style.display = 'block';
                document.getElementById('calculadora-dias-btn').classList.add('active');
            } else if (calculator === 'fechas') {
                document.getElementById('calculadora-fechas').style.display = 'block';
                document.getElementById('calculadora-fechas-btn').classList.add('active');
            } else if (calculator === 'nueva-fecha-termino') {
                document.getElementById('nueva-fecha-termino').style.display = 'block';
                document.getElementById('nueva-fecha-termino-btn').classList.add('active');
            }
        }

        // Reset forms when switching calculators
        function resetForms() {
            // Reset Calculadora de congelamientos
            document.getElementById('fecha-inicial').value = '';
            document.getElementById('dias-a-sumar').value = '';
            document.getElementById('excluir-dias').checked = true;
            document.getElementById('resultado-dias').innerText = '';
            document.getElementById('solicitar-congelamiento-btn').style.display = 'none';

            // Reset Calculadora de días congelados
            document.getElementById('fecha1').value = '';
            document.getElementById('fecha2').value = '';
            document.getElementById('excluir-dias-fechas').checked = true;
            document.getElementById('resultado-fechas').innerText = '';

            // Reset Nueva fecha de término
            document.getElementById('fecha-inicio-termino').value = '';
            document.getElementById('dias-a-sumar-termino').value = '';
            document.getElementById('resultado-termino').innerText = '';

            // Reset Solicitud de congelamiento
            document.getElementById('formulario-congelamiento').style.display = 'none';
            document.getElementById('main-content').style.display = 'flex';
            document.getElementById('nombre').value = '';
            document.getElementById('matricula').value = '';
            document.getElementById('filial').value = '';
            document.getElementById('fecha-inicio').value = '';
            document.getElementById('fecha-fin').value = '';
            document.getElementById('motivo').value = '';
            document.querySelectorAll('input[name="cliente-correo"]').forEach(radio => radio.checked = false);
            document.getElementById('otro-correo').value = '';
            document.getElementById('otro-correo-container').style.display = 'none';
            document.getElementById('texto-generado').value = '';
        }

        // Asignar eventos a los botones de calculadora
        document.getElementById('calculadora-dias-btn').addEventListener('click', function() {
            showCalculator('dias');
            resetForms();
            // Establecer el min de fecha-inicial al día de hoy
            let todayISO = today.toISOString().split('T')[0];
            document.getElementById('fecha-inicial').setAttribute('min', todayISO);
        });

        document.getElementById('calculadora-fechas-btn').addEventListener('click', function() {
            showCalculator('fechas');
            resetForms();
            // Eliminar el min del fecha-inicial si estaba establecido
            document.getElementById('fecha-inicial').removeAttribute('min');
        });

        document.getElementById('nueva-fecha-termino-btn').addEventListener('click', function() {
            showCalculator('nueva-fecha-termino');
            resetForms();
            // No se establece un min específico para la nueva calculadora
        });

        // Mostrar la calculadora de congelamientos por defecto al cargar la página
        window.onload = function() {
            showCalculator('dias');
            // Establecer el min de fecha-inicial al día de hoy
            let todayISO = today.toISOString().split('T')[0];
            document.getElementById('fecha-inicial').setAttribute('min', todayISO);
        }

        // Función para obtener días festivos de un año dado
        async function fetchHolidays(year) {
            try {
                let response = await fetch(`https://date.nager.at/api/v3/PublicHolidays/${year}/MX`);
                if (!response.ok) {
                    throw new Error('Error al obtener los días festivos');
                }
                let data = await response.json();
                let holidays = data.map(holiday => holiday.date);
                return holidays;
            } catch (error) {
                console.error('Error fetching holidays:', error);
                return [];
            }
        }

        // Calculadora de congelamientos
        document.getElementById('calcular-dias-btn').addEventListener('click', async function() {
            let fechaInicial = document.getElementById('fecha-inicial').value;
            let diasASumar = parseInt(document.getElementById('dias-a-sumar').value);
            let excluirDias = document.getElementById('excluir-dias').checked;

            if (!fechaInicial || isNaN(diasASumar)) {
                showModal('Por favor ingrese la fecha inicial y el número de días a congelar.');
                return;
            }

            let fecha = new Date(fechaInicial);
            fecha.setHours(0,0,0,0); // Asegurar que la hora sea 00:00:00
            let diasSumados = 0;

            // Validar que la fecha inicial sea a futuro o presente
            if (fecha < today) {
                showModal('La fecha inicial debe ser posterior o igual al día de hoy.');
                return;
            }

            // Validar rango de días
            if (diasASumar < 15 || diasASumar > 90) {
                showModal('El número de días a congelar debe estar entre 15 y 90.');
                return;
            }

            // Obtener lista de días festivos
            let years = [];
            let currentYear = fecha.getFullYear();
            let endDate = new Date(fecha);
            endDate.setDate(endDate.getDate() + diasASumar + 100);
            let endYear = endDate.getFullYear();

            for (let y = currentYear; y <= endYear; y++) {
                years.push(y);
            }
            let holidays = [];

            if (excluirDias) {
                // Obtener festivos para cada año
                for (let y of years) {
                    let h = await fetchHolidays(y);
                    holidays = holidays.concat(h);
                }
            }

            // Contar días de forma inclusiva
            let currentDate = new Date(fecha);

            while (diasSumados < diasASumar) {
                // Incrementar día
                currentDate.setDate(currentDate.getDate() + 1);
                let dayOfWeek = currentDate.getDay();
                let formattedDate = currentDate.toISOString().split('T')[0];

                if (excluirDias && (dayOfWeek === 0 || holidays.includes(formattedDate))) {
                    continue;
                }
                diasSumados++;
            }

            // Formatear la fecha resultado
            let options = { day: 'numeric', month: 'long', year: 'numeric' };
            let fechaResultado = currentDate.toLocaleDateString('es-ES', options);

            document.getElementById('resultado-dias').innerText = fechaResultado;
            document.getElementById('solicitar-congelamiento-btn').style.display = 'inline-block';

            // Guardar fechas para el formulario
            window.fechaInicioCongelamiento = fechaInicial;
            window.fechaFinCongelamiento = currentDate.toISOString().split('T')[0];
        });

        // Calculadora de días congelados
        document.getElementById('calcular-fechas-btn').addEventListener('click', async function() {
            let fecha1 = document.getElementById('fecha1').value;
            let fecha2 = document.getElementById('fecha2').value;
            let excluirDias = document.getElementById('excluir-dias-fechas').checked;

            if (!fecha1 || !fecha2) {
                showModal('Por favor ingrese ambas fechas.');
                return;
            }

            let startDate = new Date(fecha1);
            startDate.setHours(0,0,0,0);
            let endDate = new Date(fecha2);
            endDate.setHours(0,0,0,0);

            // Manejar el orden de las fechas
            if (endDate < startDate) {
                // Intercambiar fechas
                let temp = startDate;
                startDate = endDate;
                endDate = temp;
            }

            // Calcular días totales incluyendo ambos días
            let totalDays = Math.floor((endDate - startDate) / (1000 * 60 * 60 * 24)) + 1;

            let daysCount = 0;

            // Obtener lista de días festivos
            let years = [];
            for (let y = startDate.getFullYear(); y <= endDate.getFullYear(); y++) {
                years.push(y);
            }
            let holidays = [];

            if (excluirDias) {
                // Obtener festivos para cada año
                for (let y of years) {
                    let h = await fetchHolidays(y);
                    holidays = holidays.concat(h);
                }
            }

            let currentDate = new Date(startDate);

            for (let i = 0; i < totalDays; i++) {
                let dayOfWeek = currentDate.getDay();
                let formattedDate = currentDate.toISOString().split('T')[0];

                if (excluirDias && (dayOfWeek === 0 || holidays.includes(formattedDate))) {
                    // Excluir este día
                } else {
                    daysCount++;
                }

                currentDate.setDate(currentDate.getDate() + 1);
            }

            document.getElementById('resultado-fechas').innerText = daysCount + ' días';
        });

        // Nueva fecha de término
        document.getElementById('calcular-termino-btn').addEventListener('click', function() {
            let fechaInicioTermino = document.getElementById('fecha-inicio-termino').value;
            let diasASumarTermino = parseInt(document.getElementById('dias-a-sumar-termino').value);

            if (!fechaInicioTermino || isNaN(diasASumarTermino)) {
                showModal('Por favor ingrese la fecha inicial de término y el número de días congelados.');
                return;
            }

            // Validar rango de días
            if (diasASumarTermino < 15 || diasASumarTermino > 90) {
                showModal('El número de días congelados debe ser entre 15 y 90.');
                return;
            }

            let fecha = new Date(fechaInicioTermino);
            fecha.setHours(0,0,0,0); // Asegurar que la hora sea 00:00:00
            let diasSumados = 0;

            // Sumar días adicionales
            diasASumarTermino += 1; // Sumar 1 día adicional

            // Contar días de forma inclusiva
            while (diasSumados < diasASumarTermino) {
                fecha.setDate(fecha.getDate() + 1);
                diasSumados++;
            }

            // Formatear la fecha resultado
            let options = { day: 'numeric', month: 'long', year: 'numeric' };
            let fechaResultado = fecha.toLocaleDateString('es-ES', options);

            document.getElementById('resultado-termino').innerText = fechaResultado;
        });

        // Mostrar formulario de congelamiento para "Calculadora de congelamientos"
        document.getElementById('solicitar-congelamiento-btn').addEventListener('click', function() {
            document.getElementById('main-content').style.display = 'none';
            document.getElementById('formulario-congelamiento').style.display = 'block';

            // Rellenar fechas automáticamente
            document.getElementById('fecha-inicio').value = window.fechaInicioCongelamiento;
            document.getElementById('fecha-fin').value = window.fechaFinCongelamiento;
        });

        // Flecha de regreso
        document.getElementById('back-arrow').addEventListener('click', function() {
            document.getElementById('formulario-congelamiento').style.display = 'none';
            document.getElementById('main-content').style.display = 'flex';
            resetForms();
            // Restaurar la calculadora seleccionada
            // Puedes añadir lógica adicional si es necesario
        });

        // Mostrar u ocultar campo "Otro" en cliente de correo
        document.getElementsByName('cliente-correo').forEach(function(radio) {
            radio.addEventListener('change', function() {
                if (this.value === 'otro') {
                    document.getElementById('otro-correo-container').style.display = 'block';
                } else {
                    document.getElementById('otro-correo-container').style.display = 'none';
                }
            });
        });

        // Modal functionality
        const modal = document.getElementById('custom-modal');
        const modalMessage = document.getElementById('modal-message');
        const closeModalBtn = document.getElementById('close-modal');

        function showModal(message) {
            modalMessage.innerText = message;
            modal.style.display = 'block';
        }

        closeModalBtn.onclick = function() {
            modal.style.display = 'none';
        }

        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        }

        // Generar texto y manejar opciones de correo
        document.getElementById('generar-texto-btn').addEventListener('click', function() {
            let nombre = document.getElementById('nombre').value.trim();
            let matricula = document.getElementById('matricula').value.trim();
            let filial = document.getElementById('filial').value.trim();
            let fechaInicio = document.getElementById('fecha-inicio').value;
            let fechaFin = document.getElementById('fecha-fin').value;
            let motivo = document.getElementById('motivo').value.trim();
            let clienteCorreo = document.querySelector('input[name="cliente-correo"]:checked');
            let otroCorreo = document.getElementById('otro-correo').value.trim();

            if (!nombre || !matricula || !filial || !fechaInicio || !fechaFin || !motivo || !clienteCorreo) {
                showModal('Por favor complete todos los campos y seleccione un cliente de correo.');
                return;
            }

            if (clienteCorreo.value === 'otro' && !otroCorreo) {
                showModal('Por favor especifique tu cliente de correo.');
                return;
            }

            // Formatear fechas
            let options = { day: 'numeric', month: 'long', year: 'numeric' };
            let fechaInicioFormateada = new Date(fechaInicio).toLocaleDateString('es-ES', options);
            let fechaFinFormateada = new Date(fechaFin).toLocaleDateString('es-ES', options);

            let textoGenerado = `¡Buen día!
Por medio de la presente solicito se congele mi cuenta durante el periodo que indico a continuación.
Nombre: ${nombre}
Matrícula: ${matricula}
Filial: ${filial}
Fecha de inicio de congelamiento: ${fechaInicioFormateada}
Fecha de término de congelamiento: ${fechaFinFormateada}
Motivo: ${motivo}`;

            document.getElementById('texto-generado').value = textoGenerado;

            if (clienteCorreo.value === 'gmail' || clienteCorreo.value === 'outlook') {
                let mailtoLink = '';
                let asunto = encodeURIComponent(`SOLICITUD DE CONGELAMIENTO (${nombre} y ${matricula})`);
                let cuerpo = encodeURIComponent(textoGenerado);
                let destinatario = 'atencionacademica.cg@linguatec.com.mx';
                let cc = 'alberto.martinez@linguatec.com.mx,recepcion.sjr@linguatec.com.mx';

                if (clienteCorreo.value === 'gmail') {
                    mailtoLink = `https://mail.google.com/mail/?view=cm&fs=1&to=${encodeURIComponent(destinatario)}&cc=${encodeURIComponent(cc)}&su=${asunto}&body=${cuerpo}`;
                } else if (clienteCorreo.value === 'outlook') {
                    mailtoLink = `https://outlook.live.com/owa/?path=/mail/action/compose&to=${encodeURIComponent(destinatario)}&cc=${encodeURIComponent(cc)}&subject=${asunto}&body=${cuerpo}`;
                }

                window.open(mailtoLink, '_blank');
            } else if (clienteCorreo.value === 'otro') {
                showModal('Por favor copia el texto generado y pégalo en tu cliente de correo preferido.');
            }
        });

        // Copiar texto
        document.getElementById('copiar-texto-btn').addEventListener('click', function() {
            let texto = document.getElementById('texto-generado');
            texto.select();
            texto.setSelectionRange(0, 99999); // Para dispositivos móviles

            try {
                document.execCommand('copy');
                showModal('Texto copiado al portapapeles.');
            } catch (err) {
                showModal('No se pudo copiar el texto.');
            }
        });

        // Click en el título del header para refrescar la página
        document.getElementById('header-title').addEventListener('click', function() {
            location.reload();
        });
    </script>
</body>
</html>
